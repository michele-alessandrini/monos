<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Monos - acquista mono porzioni</title>
  <meta name="description" content="Single snacks for parties, events and improved hygiene">
  <meta name="author" content="Monos">

  <meta property="og:title" content="Monos - single snacks for safe parties and events">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.monosapp.com>
  <meta property="og:description" content="Single snacks for safe parties and events">

  <link rel="stylesheet" href="//s3.eu-south-1.amazonaws.com/static.monosapp.com/css/shared.css?v=1.0" />
  <link rel="stylesheet" href="//s3.eu-south-1.amazonaws.com/static.monosapp.com/css/style_grid.css?v=1.0" />
  <link rel="stylesheet" href="//s3.eu-south-1.amazonaws.com/static.monosapp.com/css/menu.css?v=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <style>
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      grid-gap: 10px;
    }

    .filter {
      display: inline-grid;
      grid-gap: 10px;
    }

    .item {
      background: #ffffff;
      padding: 20px;
    }

    .product-item {
      width: 200px;
      height: 200px;
    }

  </style>

</head>

<body>

  <!-- NAV BAR -->

  <div class="topnav" id="myTopnav">
    <a href="index.html" class="active">MONOS - DIY YOUR PARTYBOX </a>
    <a href="products.html">Our products</a>
    <a href="about.html">About</a>
    <a href="javascript:void(0);" class="icon" onclick="hideMenu()">
      <i class="fa fa-bars"></i>
    </a>
  </div>

  <!-- NAV BAR: END -->

  <!-- CONTENT -->

  <div id="content">

    <div class="filter">
      <div>
        <img src="//s3.eu-south-1.amazonaws.com/static.monosapp.com/images/lactose-free.jpg" class="img-filter" name="lactose" id="filterLactose" alt="" height="100" width="100">
      </div>
      <div>
        <img src="//s3.eu-south-1.amazonaws.com/static.monosapp.com/images/gluten-free.png" class="img-filter" name="gluten" id="filterGluten" alt=""  height="100" width="100">
      </div>
      <div>
        <img src="//s3.eu-south-1.amazonaws.com/static.monosapp.com/images/vegan.jpg" class="img-filter" alt="" name="vegan" id="filterVegan"  height="100" width="100">
      </div>
    </div>

    <div class="grid">
    </div>

  </div>

  <!-- CONTENT: END -->


  <!-- JQUERY -->

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="//s3.eu-south-1.amazonaws.com/static.monosapp.com/js/jquery.blockUI.js"></script>
  <script src="//s3.eu-south-1.amazonaws.com/static.monosapp.com/js/jquery.imgcheckbox.js"></script>
  <script type="text/javascript">

    $(document).ajaxStart($.blockUI({ message: '<h1>Loading...</h1>', css: { 'font-family': 'Helvetica, sans-serif', 'font-size': '13px', backgroundColor: '#04AA6D', color: '#fff'} })).ajaxStop($.unblockUI);

    $(document).ready(function(){

        var isCheckedVegan = $("#filterVegan").parent().hasClass("imgChked");
        var isCheckedGluten = $("#filterGluten").parent().hasClass("imgChked");
        var isCheckedLactose = $("#filterLactose").parent().hasClass("imgChked");

        $.ajax({
            url: 'api/products-list.php',
            cache: false,
            data: {
              gluten: isCheckedGluten,
              lactose: isCheckedLactose,
              vegan: isCheckedVegan
            },
            success: function(data) {
              $("div.grid").empty();
              renderArrayJson($.parseJSON(data));
            }
        });


			 $("div.filter").children('img').click(function() {

            var isCheckedVegan = $("#filterVegan").parent().hasClass("imgChked");
            var isCheckedGluten = $("#filterGluten").parent().hasClass("imgChked");
            var isCheckedLactose = $("#filterLactose").parent().hasClass("imgChked");

            $.ajax({
                url: 'api/products-list.php',
                data: {
                  gluten: isCheckedGluten,
                  lactose: isCheckedLactose,
                  vegan: isCheckedVegan
                },
                cache: false,
                success: function(data) {
                  $("div.grid").empty();
                  renderArrayJson($.parseJSON(data));
                }
            });

         });

    })

    function renderJsonElementToHTML(JsonElement)
    {
      var grid = $("div.grid")

      var renderedElement = $('<div class="item"></div>');
      renderedElement.append('<h2 class="item-title">' + JsonElement["productName"] + '</h2>');
      renderedElement.append('<img src="//s3.eu-south-1.amazonaws.com/static.monosapp.com/images/' + JsonElement["id"] + '.jpg" class="product-item" />');
      renderedElement.append('<p class="item-description"><b>Description:</b> ' + JsonElement["productDescription"] + '</p>');
      renderedElement.append('<p class="item-type"><b>Type:</b> Gluten Free!</p>');

      grid.append(renderedElement);

    }

    function renderArrayJson(JsonArray)
    {
      console.log("Eccomi qui");
      $.each(JsonArray, function(i, item) {
          console.log(item);
          renderJsonElementToHTML(item);
      });

    }

    function hideMenu() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }

	</script>

  <!-- JQUERY: END -->

</body>
</html>
